<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Hot Restaurant</title>
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
      integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh"
      crossorigin="anonymous"
    />
    <script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.4.1.min.js"></script>
  </head>
  <style>
    .center {
      text-align: center;
    }
  </style>
  <body>
    <div class="jumbotron center">
      <h1 class="display-4">Hot Restaurant</h1>
      <p class="lead">Reserve a table by inputting your information below!</p>
      <hr class="my-4" />
      <a class="btn btn-primary btn-lg" id="viewTable" href="confirm.html" role="button"
        >View Tables</a
      >
      <a class="btn btn-primary btn-lg" href="index.html" role="button">Home</a>
    </div>
    <div class="container">
      <div class="row">
        <div class="col-md-12">
          <form>
            <div class="form-group">
              <label for="exampleFormControlInput1">Name</label>
              <input
                type="name"
                class="form-control"
                id="name"
                placeholder="first name"
              />
            </div>
            <div class="form-group">
              <label for="exampleFormControlInput1">Phone Number</label>
              <input
                type="phonenumber"
                class="form-control"
                id="phone"
                placeholder="###-###-####"
              />
            </div>
            <div class="form-group">
              <label for="exampleFormControlInput1">Email Address</label>
              <input
                type="email"
                class="form-control"
                id="email"
                placeholder="name@example.com"
              />
            </div>
            <div class="form-group">
              <label for="exampleFormControlInput1">Unique Username</label>
              <input
                type="username"
                class="form-control"
                id="id"
                placeholder="abc123"
              />
            </div>
          </form>
          <button type="button" class="btn btn-dark" id="addButton">
            Submit
          </button>
        </div>
      </div>
    </div>
    <br />
    <br />
    <script type="text/javascript">
      $("#addButton").on("click", function(event) {
        event.preventDefault();
        let newReservations = {
          name: $("#name")
            .val()
            .trim(),
          phone: $("#phone")
            .val()
            .trim(),
          email: $("#email")
            .val()
            .trim(),
          id: $("#id")
            .val()
            .trim()
        };
        console.log(newReservations);
        $.post("http://localhost:3000/api/confirm", newReservations).then(
          function(data) {
            console.log("confirmed", data);
            alert("Your reservation is confirmed!");
            $.ajax({
              url: "http://localhost:3000/api/confirm",
              method: "GET",
              dataType: "json",
              data: {
                id: $("#id")
                  .val()
                  .trim()
              }
            }).then(function(response){
                console.log(response)
                
        
            }
                
                // var userName = response.id
            );
          }
        );
      });
    //   $('#viewTable').on('click', function(event){
    //       event.preventDefault();
    //       $.get("http://localhost:3000/api/confirm", newReservations).then(
    //           function(data){
    //               $("#currentRes").append(data.id);
    //           }
    //       )
    //   })
    </script>
  </body>
</html>
